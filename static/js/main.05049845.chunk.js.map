{"version":3,"sources":["components/CreateMessage.jsx","components/DeleteMessage.jsx","components/GetMessages.jsx","App.js","index.js"],"names":["CreateMessage","props","useState","jour","setJour","message","setMessage","className","onSubmit","e","preventDefault","console","log","window","location","fetch","hostname","method","headers","body","JSON","stringify","then","res","json","data","alert","setRefresh","refresh","catch","error","htmlFor","required","id","value","onChange","target","rows","DeleteMessage","onClick","setToggle","toggle","GetMessages","list","setList","useEffect","map","_id","uuidv4","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.05049845.chunk.js","sourcesContent":["import { useState } from \"react\";\r\n\r\nexport default function CreateMessage(props) {\r\n  const [jour, setJour] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const submit = function (e) {\r\n    e.preventDefault();\r\n    console.log(window.location);\r\n\r\n    fetch(\r\n      window.location.hostname === \"localhost\"\r\n        ? \"http://localhost:4200/api/messages/\"\r\n        : \"https://todo-list-theo.herokuapp.com/api/messages/\",\r\n\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ jour: jour, message: message }),\r\n      }\r\n    )\r\n      .then(function (res) {\r\n        return res.json();\r\n      })\r\n      .then(function (data) {\r\n        alert(data.message);\r\n        setJour(\"\");\r\n        setMessage(\"\");\r\n        props.setRefresh(!props.refresh);\r\n      })\r\n      .catch(function (error) {\r\n        return error;\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"mx-auto col-10 col-sm-6 col-lg-4\">\r\n      <form onSubmit={submit}>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"inputJour\">\r\n            <h4>Titre ou jour :</h4>\r\n          </label>\r\n          <input\r\n            required\r\n            className=\"form-control mt-2\"\r\n            id=\"inputJour\"\r\n            value={jour}\r\n            onChange={function (e) {\r\n              setJour(e.target.value);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"form-group mt-2\">\r\n          <label htmlFor=\"inputMessage\">\r\n            <h4>Message :</h4>\r\n          </label>\r\n          <textarea\r\n            required\r\n            rows=\"4\"\r\n            className=\"form-control mt-2\"\r\n            id=\"inputMessage\"\r\n            value={message}\r\n            onChange={function (e) {\r\n              setMessage(e.target.value);\r\n            }}\r\n          />\r\n        </div>\r\n        <button className=\"btn btn-primary mt-3 mb-4\">\r\n          Ajouter à la liste\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","export default function DeleteMessage(props) {\r\n  const deleteMessage = function (e) {\r\n    e.preventDefault();\r\n\r\n    fetch(\r\n      window.location.hostname === \"localhost\"\r\n        ? \"http://localhost:4200/api/messages/\"\r\n        : \"https://todo-list-theo.herokuapp.com/api/messages/\",\r\n      {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ id: props.id }),\r\n      }\r\n    )\r\n      .then(function (res) {\r\n        return res.json();\r\n      })\r\n      .then(function (data) {\r\n        alert(data.message);\r\n        props.setToggle(!props.toggle);\r\n      })\r\n      .catch(function (error) {\r\n        alert(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <button onClick={deleteMessage} className=\"btn btn-danger\">\r\n      Supprimer\r\n    </button>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\n// import module uuid pour créer key unique facilement\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n// import components\r\nimport DeleteMessage from \"./DeleteMessage\";\r\n\r\nexport default function GetMessages(props) {\r\n  const [list, setList] = useState([]);\r\n  const [toggle, setToggle] = useState(true);\r\n\r\n  useEffect(\r\n    function () {\r\n      fetch(\r\n        window.location.hostname === \"localhost\"\r\n          ? \"http://localhost:4200/api/messages/\"\r\n          : \"https://todo-list-theo.herokuapp.com/api/messages/\",\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      )\r\n        .then(function (res) {\r\n          return res.json();\r\n        })\r\n        .then(function (data) {\r\n          setList(data);\r\n        })\r\n        .catch(function (error) {\r\n          return error;\r\n        });\r\n    },\r\n    [props.refresh, toggle]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"mb-4 text-center\">Liste des choses à faires :</h2>\r\n      <div className=\"d-flex flex-wrap justify-content-center\">\r\n        {list.map(function (message) {\r\n          return (\r\n            <div className=\"card m-3 col-10 col-sm-10 col-lg-3\" key={uuidv4()}>\r\n              <h3 className=\"card-header\">{message.jour}</h3>\r\n              <div className=\"card-body\">\r\n                <p>{message.message}</p>\r\n              </div>\r\n              <div className=\"card-footer d-flex justify-content-end\">\r\n                <DeleteMessage\r\n                  id={message._id}\r\n                  toggle={toggle}\r\n                  setToggle={setToggle}\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\n// components\nimport CreateMessage from \"./components/CreateMessage\";\nimport GetMessages from \"./components/GetMessages\";\n\nfunction App() {\n  const [refresh, setRefresh] = useState(false);\n\n  return (\n    <div className=\"App\">\n      <h1 className=\"text-center mt-2 mb-2\">Todo-List</h1>\n      <CreateMessage refresh={refresh} setRefresh={setRefresh}  />\n      <GetMessages refresh={refresh} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}